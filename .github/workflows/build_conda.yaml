name: Build Conda Packages

on: 
  push: 
#     tags: 
#       - 'v[0-9]+.[0-9]+.[0-9]+'

jobs: 
  build-condas:
    runs-on: ${{matrix.os}}
    strategy: 

      matrix: 
        os: [ubuntu-latest]
        python-version: ['3.9', '3.10', '3.11', '3.12']

    steps: 
      - name: Checkout code 
        uses: actions/checkout@v3
    
      - name: Setup Python 
        uses: actions/setup-python@v4
        with: 
          python-version: ${{ matrix.python-version }}

      - name: Add conda to system path 
        run: | 
          # $CONDA is an environment variable pointing to the root of the miniconda directory
          echo $CONDA/bin >> $GITHUB_PATH
      - name: Install dependencies 
        run: | 
          conda install conda-build 

      - name: Build Conda Package 
        run: | 
          conda-build recipe 